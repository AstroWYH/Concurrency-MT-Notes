```cpp
#include <atomic>
#include <chrono>
#include <iostream>
#include <thread>

class SpinLock {
 public:
  void lock() {
    while (m_spinLock.test_and_set(std::memory_order_acquire)) {
      std::cout << "Thread " << std::this_thread::get_id() << " is spinning..."
                << std::endl;
      std::this_thread::sleep_for(std::chrono::milliseconds(100));
    }
    std::cout << "Thread " << std::this_thread::get_id()
              << " acquired the lock." << std::endl;
  }

  void unlock() {
    m_spinLock.clear(std::memory_order_release);
    std::cout << "Thread " << std::this_thread::get_id()
              << " released the lock." << std::endl;
  }

 private:
  std::atomic_flag m_spinLock = ATOMIC_FLAG_INIT;
};

SpinLock spinLock;

void threadFunc() {
  spinLock.lock();

  // 操作共享资源
  std::cout << "Thread " << std::this_thread::get_id()
            << " is accessing the shared resource." << std::endl;
  std::this_thread::sleep_for(std::chrono::milliseconds(1000));

  spinLock.unlock();
}

int main() {
  std::thread t1(threadFunc);
  std::thread t2(threadFunc);

  t1.join();
  t2.join();

  return 0;
}

// Thread Thread 20328 is spinning...
// 20332 acquired the lock.
// Thread 20332 is accessing the shared resource.
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20328 is spinning...
// Thread 20332 released the lock.
// Thread 20328 acquired the lock.
// Thread 20328 is accessing the shared resource.
// Thread 20328 released the lock.

// Thread Thread 17624 acquired the lock.
// Thread 17624 is accessing the shared resource.
// 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17616 is spinning...
// Thread 17624 released the lock.
// Thread 17616 acquired the lock.
// Thread 17616 is accessing the shared resource.
// Thread 17616 released the lock.
```

